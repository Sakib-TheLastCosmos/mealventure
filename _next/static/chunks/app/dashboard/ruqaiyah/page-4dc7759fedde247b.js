(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[246],{3435:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>L});var a=t(5155),l=t(2115),i=t(5695),n=t(8482),r=t(7168),c=t(4964),d=t(8145),m=t(646),o=t(4186),x=t(4861),p=t(4516),h=t(1976),u=t(8186),g=t(8564),j=t(4835),N=t(9397),b=t(2713),f=t(9074),v=t(6785),y=t(1724),w=t(4190),k=t(405),A=t(8441);let T=(0,t(9946).A)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);var S=t(4416);function D(e){let{userId:s,onClose:t}=e,[i,c]=(0,l.useState)([]),[m,o]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{try{let e=await y.f.getUnreadNotifications(s);e.length>0&&(c(e),o(!0))}catch(e){console.error("Error loading notifications:",e)}})()},[s]);let x=async()=>{try{let e=i.map(e=>e.id);await y.f.markNotificationsAsRead(s,e),o(!1),setTimeout(t,300)}catch(e){console.error("Error marking notifications as read:",e),t()}},p=e=>{switch(e){case"meal_completed":return"bg-green-100 border-green-300";case"achievement_unlocked":return"bg-yellow-100 border-yellow-300";case"bonus_points":return"bg-blue-100 border-blue-300";case"level_up":return"bg-purple-100 border-purple-300";default:return"bg-gray-100 border-gray-300"}};return m&&0!==i.length?(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)(n.Zp,{className:"w-full max-w-md transform transition-all duration-300 ".concat(m?"scale-100 opacity-100":"scale-95 opacity-0"),children:[(0,a.jsx)(n.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(n.ZB,{className:"flex items-center space-x-2",children:[(0,a.jsx)(T,{className:"h-5 w-5 text-pink-500"}),(0,a.jsx)("span",{children:"New Notifications"})]}),(0,a.jsx)(r.$,{variant:"ghost",size:"sm",onClick:x,children:(0,a.jsx)(S.A,{className:"h-4 w-4"})})]})}),(0,a.jsx)(n.Wu,{className:"space-y-3 max-h-96 overflow-y-auto",children:i.map(e=>(0,a.jsx)("div",{className:"p-3 rounded-lg border-2 ".concat(p(e.type)),children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"text-2xl",children:e.icon}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"font-medium text-sm",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.message}),e.points&&(0,a.jsxs)(d.E,{className:"mt-2 bg-pink-500",children:["+",e.points," pts"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:new Date(e.timestamp).toLocaleString()})]})]})},e.id))}),(0,a.jsx)("div",{className:"p-4 pt-0",children:(0,a.jsx)(r.$,{onClick:x,className:"w-full bg-pink-500 hover:bg-pink-600",children:"Got it! ✨"})})]})}):null}function L(){var e;let s=(0,i.useRouter)(),[t,T]=(0,l.useState)(null),[S,L]=(0,l.useState)([]),[P,E]=(0,l.useState)(new Date),[Z,C]=(0,l.useState)([]),[M,z]=(0,l.useState)([]),[B,O]=(0,l.useState)(""),[W,_]=(0,l.useState)(null),[q,R]=(0,l.useState)(null),[I,U]=(0,l.useState)(!1),[F,X]=(0,l.useState)(!0),[H,$]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e;if("ruqaiyah"!==localStorage.getItem("currentUser")){s.push("/");return}(async()=>{try{X(!0),$(null),await y.f.initializeTodayData();let e=await y.f.initializeAchievements();L(e);let s=await y.f.getMonthlyData(new Date().getMonth());C(s);let t=await y.f.getHistoricalData(90);z(t);let a=await y.f.initializeUserProfile("ruqaiyah");R(a),await y.f.initializeMealTemplates();let l=y.f.subscribeTodayData(e=>{T(e),X(!1)}),i=y.f.subscribeUserProfile("ruqaiyah",e=>{R(e)});return setTimeout(()=>{U(!0)},1e3),()=>{l(),i()}}catch(e){console.error("Error initializing data:",e),$("Failed to load data. Please check your connection."),X(!1)}})().then(s=>{e=s});let t=setInterval(()=>{E(new Date)},6e4);return()=>{e&&e(),clearInterval(t)}},[s]);let V=e=>"pending"!==e.status?e.status:"pending",Y=e=>{switch(e){case"completed-on-time":return(0,a.jsx)(m.A,{className:"h-5 w-5 text-green-500"});case"completed-late":return(0,a.jsx)(o.A,{className:"h-5 w-5 text-yellow-500"});case"missed":return(0,a.jsx)(x.A,{className:"h-5 w-5 text-red-500"});case"upcoming":return(0,a.jsx)(p.A,{className:"h-5 w-5 text-blue-500"});default:return(0,a.jsx)(o.A,{className:"h-5 w-5 text-gray-400"})}},G=async e=>{O(e);try{let s=await y.f.getDateData(e);_(s)}catch(e){console.error("Error fetching day data:",e),_(null)}},J=e=>y.f.calculateLevel(e);return F?(0,a.jsx)(w.x,{user:"ruqaiyah"}):H?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-blue-50 to-purple-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)(h.A,{className:"h-12 w-12 text-pink-400 mx-auto"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-pink-600",children:"Oops!"}),(0,a.jsx)("p",{className:"text-gray-600",children:H}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600",children:"Try Again"})]})}):t?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-blue-50 to-purple-50",children:[(0,a.jsx)("div",{className:"bg-white/80 backdrop-blur-sm border-b border-pink-200 sticky top-0 z-50",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-2 sm:px-4 py-3 sm:py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4 min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-pink-400 to-purple-400 p-1.5 sm:p-2 rounded-full flex-shrink-0",children:(0,a.jsx)(h.A,{className:"h-4 w-4 sm:h-6 sm:w-6 text-white"})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-2",children:[(0,a.jsx)("h1",{className:"text-lg sm:text-xl font-bold text-gray-800 truncate",children:"Ruqaiyah"}),q&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 sm:space-x-3 mt-1 sm:mt-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1 bg-gradient-to-r from-yellow-100 to-orange-100 px-2 py-0.5 sm:px-3 sm:py-1 rounded-full border border-yellow-300",children:[(0,a.jsx)(u.A,{className:"h-3 w-3 sm:h-4 sm:w-4 text-yellow-600"}),(0,a.jsxs)("span",{className:"text-xs sm:text-sm font-bold text-yellow-700",children:["Level ",q.currentLevel]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 bg-gradient-to-r from-purple-100 to-pink-100 px-2 py-0.5 sm:px-3 sm:py-1 rounded-full border border-purple-300",children:[(0,a.jsx)(g.A,{className:"h-3 w-3 sm:h-4 sm:w-4 text-purple-600"}),(0,a.jsx)("span",{className:"text-xs sm:text-sm font-bold text-purple-700",children:q.totalPoints.toLocaleString()})]})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-4 text-xs sm:text-sm mt-1 sm:mt-0",children:(0,a.jsxs)("span",{className:"text-pink-600 font-medium",children:["Today: ",t.totalPoints," pts"]})})]})]}),(0,a.jsxs)(r.$,{variant:"outline",size:"sm",onClick:()=>{localStorage.removeItem("currentUser"),s.push("/")},className:"border-pink-200 text-pink-600 hover:bg-pink-50 bg-transparent ml-2 flex-shrink-0",children:[(0,a.jsx)(j.A,{className:"h-3 w-3 sm:h-4 sm:w-4 sm:mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Logout"})]})]})})}),t.noteOfTheDay&&(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-2 sm:px-4 py-2 sm:py-4",children:(0,a.jsx)(n.Zp,{className:"bg-gradient-to-r from-pink-100 to-purple-100 border-pink-200",children:(0,a.jsxs)(n.Wu,{className:"p-3 sm:p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 sm:h-5 sm:w-5 text-pink-500"}),(0,a.jsx)("span",{className:"text-xs sm:text-sm font-medium text-pink-700",children:"Note from Sakib"})]}),(0,a.jsx)("p",{className:"text-sm sm:text-base text-gray-700",children:t.noteOfTheDay})]})})}),(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-2 sm:px-4 py-4 sm:py-6",children:(0,a.jsxs)(c.tU,{defaultValue:"overview",className:"space-y-6",children:[(0,a.jsxs)(c.j7,{className:"grid w-full grid-cols-5 bg-white/50 backdrop-blur-sm gap-1 h-auto p-1",children:[(0,a.jsxs)(c.Xi,{value:"overview",className:"data-[state=active]:bg-pink-100 text-xs sm:text-sm p-2 sm:p-3",children:[(0,a.jsx)(p.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline sm:ml-2",children:"Overview"})]}),(0,a.jsxs)(c.Xi,{value:"activity",className:"data-[state=active]:bg-pink-100 text-xs sm:text-sm p-2 sm:p-3",children:[(0,a.jsx)(N.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline sm:ml-2",children:"Activity"})]}),(0,a.jsxs)(c.Xi,{value:"progress",className:"data-[state=active]:bg-pink-100 text-xs sm:text-sm p-2 sm:p-3",children:[(0,a.jsx)(b.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline sm:ml-2",children:"Progress"})]}),(0,a.jsxs)(c.Xi,{value:"achievements",className:"data-[state=active]:bg-pink-100 text-xs sm:text-sm p-2 sm:p-3",children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline sm:ml-2",children:"Awards"})]}),(0,a.jsxs)(c.Xi,{value:"archive",className:"data-[state=active]:bg-pink-100 text-xs sm:text-sm p-2 sm:p-3",children:[(0,a.jsx)(f.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline sm:ml-2",children:"Archive"})]})]}),(0,a.jsxs)(c.av,{value:"overview",className:"space-y-6",children:[(0,a.jsxs)(n.Zp,{className:"bg-white/80 backdrop-blur-sm",children:[(0,a.jsx)(n.aR,{children:(0,a.jsxs)(n.ZB,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.A,{className:"h-5 w-5 text-pink-500"}),(0,a.jsx)("span",{children:"Today's Adventure Timeline"})]}),(0,a.jsx)("div",{className:"text-sm font-normal text-gray-600",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("div",{className:"text-center mb-4 sm:mb-6 p-3 bg-gradient-to-r from-pink-100 to-purple-100 rounded-lg border border-pink-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 sm:h-5 sm:w-5 text-pink-500"}),(0,a.jsx)("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:"Current Time:"}),(0,a.jsx)("span",{className:"text-base sm:text-lg font-bold text-pink-600",children:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute left-6 sm:left-8 top-0 bottom-0 w-0.5 sm:w-1 bg-gradient-to-b from-indigo-200 via-pink-300 to-purple-400 rounded-full"}),(0,a.jsx)("div",{className:"space-y-4 sm:space-y-8",children:(()=>{var e;let s=new Date,l=60*s.getHours()+s.getMinutes(),i=[{id:"day-begin",time:(()=>{let[e,s]=t.dayBeginTime.split(":").map(Number);return 60*e+s})(),type:"system",component:(0,a.jsxs)("div",{className:"relative flex items-start",children:[(0,a.jsx)("div",{className:"relative z-10 p-2 sm:p-3 rounded-full border-2 sm:border-4 border-white bg-gradient-to-r from-orange-100 to-yellow-100 shadow-lg flex-shrink-0",children:(0,a.jsx)(g.A,{className:"h-4 w-4 sm:h-6 sm:w-6 text-orange-500"})}),(0,a.jsx)("div",{className:"ml-4 sm:ml-6 flex-1 min-w-0",children:(0,a.jsxs)("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-lg p-3 sm:p-4 border border-orange-200 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-base sm:text-lg text-gray-800",children:"Day Begin"}),(0,a.jsx)("span",{className:"text-xs sm:text-sm text-gray-500",children:t.dayBeginTime})]}),(0,a.jsxs)(d.E,{className:"bg-orange-100 text-orange-700 border-orange-300 text-xs",children:["+",t.dayBeginPoints," points"]})]})})]})},...t.meals.map(e=>({id:e.id,time:60*Number.parseInt(e.scheduledTime.split(":")[0])+Number.parseInt(e.scheduledTime.split(":")[1]),type:"meal",component:(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)("div",{className:"relative z-10 p-4 rounded-full border-4 border-white shadow-lg transition-all duration-300 ".concat("completed-on-time"===e.status?"bg-green-100":"completed-late"===e.status?"bg-yellow-100":"missed"===e.status?"bg-red-100":"bg-gray-100"),children:Y(e.status)}),(0,a.jsx)("div",{className:"ml-6 flex-1",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-pink-100 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg text-gray-800",children:e.name}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:e.scheduledTime})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(d.E,{className:"".concat("completed-on-time"===e.status?"bg-green-100 text-green-700 border-green-300":"completed-late"===e.status?"bg-yellow-100 text-yellow-700 border-yellow-300":"missed"===e.status?"bg-red-100 text-red-700 border-red-300":"bg-blue-100 text-blue-700 border-blue-300"),children:"completed-on-time"===e.status?"Completed! +".concat(e.pointsOnTime," pts"):"completed-late"===e.status?"Late +".concat(e.pointsLate," pts"):"missed"===e.status?"Missed -".concat(e.penaltySkipped," pts"):"".concat(e.pointsOnTime," points available")}),"pending"===e.status&&(0,a.jsx)("span",{className:"text-xs text-blue-600 font-medium",children:l<e.time?"Coming up!":"Time to eat!"})]})]})})]})})),{id:"day-end",time:(()=>{let[e,s]=t.dayEndTime.split(":").map(Number);return 60*e+s})(),type:"system",component:(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)("div",{className:"relative z-10 p-3 rounded-full border-4 border-white bg-gradient-to-r from-purple-100 to-indigo-100 shadow-lg",children:(0,a.jsx)(h.A,{className:"h-6 w-6 text-purple-500"})}),(0,a.jsx)("div",{className:"ml-6 flex-1",children:(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg p-4 border border-purple-200 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg text-gray-800",children:"Day End"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:t.dayEndTime})]}),(0,a.jsxs)(d.E,{className:"bg-purple-100 text-purple-700 border-purple-300",children:["+",t.dayEndPoints," points"]})]})})]})}].sort((e,s)=>e.time-s.time),n=[],r=!1;for(let e=0;e<i.length;e++){let s=i[e],t=i[e+1];if(n.push((0,a.jsx)("div",{children:s.component},s.id)),!r){let e=!1;t?l>s.time&&l<t.time&&(e=!0):l>s.time&&(e=!0),15>=Math.abs(l-s.time)&&(e=!0),e&&(n.push((0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)("div",{className:"relative z-10 p-3 rounded-full border-4 border-white bg-gradient-to-r from-pink-200 to-purple-200 shadow-lg animate-pulse",children:(0,a.jsx)(p.A,{className:"h-6 w-6 text-pink-600"})}),(0,a.jsx)("div",{className:"ml-6 flex-1",children:(0,a.jsxs)("div",{className:"bg-gradient-to-r from-pink-50 to-purple-50 rounded-lg p-4 border-2 border-pink-300 shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg text-pink-700 animate-pulse",children:"You are here!"}),(0,a.jsx)("span",{className:"text-sm text-pink-600 font-medium",children:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.E,{className:"bg-pink-200 text-pink-800 border-pink-400 animate-pulse",children:"Current Location"}),(0,a.jsx)("span",{className:"text-xs text-pink-600",children:(()=>{if(!t)return"All events completed for today!";{let e=Math.round(t.time-l);if(!(e>0))return"Next event is due!";{let s=Math.floor(e/60),t=e%60;return s>0?"".concat(s,"h ").concat(t,"m until next event"):"".concat(t,"m until next event")}}})()})]})]})})]},"you-are-here")),r=!0)}}return!r&&l<(null===(e=i[0])||void 0===e?void 0:e.time)&&n.unshift((0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)("div",{className:"relative z-10 p-3 rounded-full border-4 border-white bg-gradient-to-r from-pink-200 to-purple-200 shadow-lg animate-pulse",children:(0,a.jsx)(p.A,{className:"h-6 w-6 text-pink-600"})}),(0,a.jsx)("div",{className:"ml-6 flex-1",children:(0,a.jsxs)("div",{className:"bg-gradient-to-r from-pink-50 to-purple-50 rounded-lg p-4 border-2 border-pink-300 shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg text-pink-700 animate-pulse",children:"You are here!"}),(0,a.jsx)("span",{className:"text-sm text-pink-600 font-medium",children:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.E,{className:"bg-pink-200 text-pink-800 border-pink-400 animate-pulse",children:"Current Location"}),(0,a.jsx)("span",{className:"text-xs text-pink-600",children:(()=>{let e=Math.round(i[0].time-l);if(!(e>0))return"Day should have started!";{let s=Math.floor(e/60),t=e%60;return s>0?"".concat(s,"h ").concat(t,"m until day begins"):"".concat(t,"m until day begins")}})()})]})]})})]},"you-are-here")),n})()})]}),(0,a.jsxs)("div",{className:"mt-8 space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-gradient-to-r from-pink-50 to-purple-50 rounded-lg border border-pink-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Today's Adventure Progress"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[t.meals.filter(e=>"completed-on-time"===e.status||"completed-late"===e.status).length," ","/ ",t.meals.length," meals"]})]}),(0,a.jsx)("div",{className:"w-full bg-white rounded-full h-3 shadow-inner",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-pink-400 to-purple-400 h-3 rounded-full transition-all duration-500 shadow-sm",style:{width:"".concat(t.meals.filter(e=>"completed-on-time"===e.status||"completed-late"===e.status).length/t.meals.length*100,"%")}})})]}),q&&(()=>{let e=J(q.totalPoints);return(0,a.jsxs)("div",{className:"p-4 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg border border-yellow-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(u.A,{className:"h-5 w-5 text-yellow-600"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Level ",e.currentLevel," Progress"]})]}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[e.progressToNext," /"," ",e.pointsForNextLevel-e.pointsForCurrentLevel," ","pts"]})]}),(0,a.jsx)("div",{className:"w-full bg-white rounded-full h-3 shadow-inner mb-2",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-400 h-3 rounded-full transition-all duration-500 shadow-sm",style:{width:"".concat(e.progressPercentage,"%")}})}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-600",children:[(0,a.jsxs)("span",{children:["Current:"," ",q.totalPoints.toLocaleString()," pts"]}),(0,a.jsxs)("span",{children:["Next Level:"," ",e.pointsForNextLevel.toLocaleString()," ","pts"]})]})]})})()]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2 sm:gap-4",children:[(0,a.jsx)(n.Zp,{className:"bg-gradient-to-br from-pink-100 to-pink-200",children:(0,a.jsxs)(n.Wu,{className:"p-4 text-center",children:[(0,a.jsx)(g.A,{className:"h-8 w-8 text-pink-500 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-pink-700",children:t.totalPoints}),(0,a.jsx)("p",{className:"text-sm text-pink-600",children:"Today's Points"})]})}),(0,a.jsx)(n.Zp,{className:"bg-gradient-to-br from-purple-100 to-purple-200",children:(0,a.jsxs)(n.Wu,{className:"p-4 text-center",children:[(0,a.jsx)(u.A,{className:"h-8 w-8 text-purple-500 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-700",children:Z.reduce((e,s)=>e+s.points,0)}),(0,a.jsx)("p",{className:"text-sm text-purple-600",children:"Month Points"})]})}),(0,a.jsx)(n.Zp,{className:"bg-gradient-to-br from-blue-100 to-blue-200",children:(0,a.jsxs)(n.Wu,{className:"p-4 text-center",children:[(0,a.jsx)(v.A,{className:"h-8 w-8 text-blue-500 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-700",children:5}),(0,a.jsx)("p",{className:"text-sm text-blue-600",children:"Day Streak"})]})}),(0,a.jsx)(n.Zp,{className:"bg-gradient-to-br from-green-100 to-green-200",children:(0,a.jsxs)(n.Wu,{className:"p-4 text-center",children:[(0,a.jsx)(m.A,{className:"h-8 w-8 text-green-500 mx-auto mb-2"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-700",children:[(null==t?void 0:t.meals.length)?Math.round(t.meals.filter(e=>"completed-on-time"===e.status).length/t.meals.length*100):0,"%"]}),(0,a.jsx)("p",{className:"text-sm text-green-600",children:"Punctuality"})]})}),(0,a.jsx)(n.Zp,{className:"bg-gradient-to-br from-yellow-100 to-orange-200",children:(0,a.jsx)(n.Wu,{className:"p-4 text-center",children:(()=>{let e=(null==q?void 0:q.totalPoints)||0,s=J(e);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.A,{className:"h-8 w-8 text-yellow-500 mx-auto mb-2"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-yellow-700",children:["Level ",s.currentLevel]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("div",{className:"w-full bg-white rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-400 h-2 rounded-full transition-all duration-500",style:{width:"".concat(s.progressPercentage,"%")}})}),(0,a.jsxs)("p",{className:"text-xs text-yellow-600 mt-1",children:[s.pointsForNextLevel-e," pts to next level"]})]})]})})()})})]})]}),(0,a.jsx)(c.av,{value:"activity",className:"space-y-4",children:(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsx)(n.ZB,{children:"Today's Activity Log"})}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[t.meals.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[Y(V(e)),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Scheduled: ",e.scheduledTime]})]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)(d.E,{variant:"completed-on-time"===e.status?"default":"completed-late"===e.status?"secondary":"missed"===e.status?"destructive":"outline",children:"completed-on-time"===e.status?"+".concat(e.pointsOnTime," pts"):"completed-late"===e.status?"+".concat(e.pointsLate," pts"):"missed"===e.status?"-".concat(e.penaltySkipped," pts"):"Pending"})})]},e.id)),null===(e=t.bonusPoints)||void 0===e?void 0:e.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-pink-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(h.A,{className:"h-5 w-5 text-pink-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Bonus Points"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.reason})]})]}),(0,a.jsxs)(d.E,{className:"bg-pink-500",children:["+",e.points," pts"]})]},e.id))]})})]})}),(0,a.jsx)(c.av,{value:"progress",className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)(k.O,{monthlyData:Z}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsx)(n.ZB,{children:"Best Achievements"})}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[S.filter(e=>e.completed).slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-yellow-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl",children:e.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.title}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["+",e.points," pts"]})]})]},e.id)),0===S.filter(e=>e.completed).length&&(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)(u.A,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"No achievements completed yet"})]})]})})]})]})}),(0,a.jsx)(c.av,{value:"achievements",className:"space-y-4",children:(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:S.map(e=>(0,a.jsx)(n.Zp,{className:"".concat(e.completed?"bg-gradient-to-br from-yellow-50 to-orange-50 border-yellow-200":"bg-gray-50 border-gray-200"),children:(0,a.jsxs)(n.Wu,{className:"p-3 sm:p-4 text-center",children:[(0,a.jsx)("div",{className:"text-3xl sm:text-4xl mb-2 ".concat(e.completed?"":"grayscale opacity-50"),children:e.icon}),(0,a.jsx)("h3",{className:"font-medium mb-1 text-sm sm:text-base",children:e.title}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mb-2",children:e.description}),(0,a.jsxs)(d.E,{variant:e.completed?"default":"secondary",className:"text-xs",children:[e.completed?"Completed":"Locked"," •"," ",e.points," pts"]})]})},e.id))})}),(0,a.jsx)(c.av,{value:"archive",className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)(A.V,{historicalData:M,onDateSelect:G,selectedDate:B}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsx)(n.ZB,{children:B?"Activity for ".concat(new Date(B).toLocaleDateString()):"Select a date to view activity"})}),(0,a.jsx)(n.Wu,{children:W?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gradient-to-r from-pink-50 to-purple-50 rounded-lg",children:[(0,a.jsx)("span",{className:"font-medium",children:"Total Points"}),(0,a.jsxs)(d.E,{className:"bg-pink-500",children:[W.totalPoints," pts"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"Meals"}),(0,a.jsx)("div",{className:"space-y-2",children:W.meals.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[Y(e.status),(0,a.jsxs)("span",{className:"text-sm",children:[e.name," (",e.scheduledTime,")"]})]}),(0,a.jsx)(d.E,{variant:"completed-on-time"===e.status?"default":"completed-late"===e.status?"secondary":"missed"===e.status?"destructive":"outline",children:"completed-on-time"===e.status?"+".concat(e.pointsOnTime):"completed-late"===e.status?"+".concat(e.pointsLate):"missed"===e.status?"-".concat(e.penaltySkipped):"Pending"})]},e.id))})]}),W.bonusPoints&&W.bonusPoints.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"Bonus Points"}),(0,a.jsx)("div",{className:"space-y-2",children:W.bonusPoints.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-pink-50 rounded",children:[(0,a.jsx)("span",{className:"text-sm",children:e.reason}),(0,a.jsxs)(d.E,{className:"bg-pink-500",children:["+",e.points]})]},e.id))})]}),W.noteOfTheDay&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"Note of the Day"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 p-3 bg-blue-50 rounded-lg",children:W.noteOfTheDay})]})]}):B?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(f.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No data available for this date"})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(f.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Click on a date in the calendar to view activity"})]})})]})]})})]})}),I&&(0,a.jsx)(D,{userId:"ruqaiyah",onClose:()=>U(!1)})]}):(0,a.jsx)(w.x,{user:"ruqaiyah",message:"Almost ready..."})}},5177:(e,s,t)=>{Promise.resolve().then(t.bind(t,3435))}},e=>{var s=s=>e(e.s=s);e.O(0,[992,254,193,46,441,684,358],()=>s(5177)),_N_E=e.O()}]);